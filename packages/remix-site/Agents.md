Purpose
This file gives AI coding agents focused, actionable knowledge to be productive in this repository.

Quick overview
- Architecture: a Remix-style React app served via Lambda/CDK, with both JS/TS and Rust→WASM components. App sources live under `app/` and routes under `app/routes/`.
- Rust/WASM: native Rust crates in `rust-wasm/client-code` (web target) and `rust-wasm/server-code` (node target). Build outputs are published into local packages referred by `package.json` as `client-rust-functions` and `server-rust-functions`.

Key workflows (canonical commands)
- Build full app: `yarn build` (runs `build:wasm`, `react-router build`, SW packaging, and deployment bundle assembly). See [package.json](../package.json) scripts.
- Build only WASM: `yarn build:wasm` or per-target `yarn build:server-rust-functions` / `yarn build:client-rust-functions`.
- Dev (fast feedback): `yarn dev` — runs a wasm watcher + `react-router dev` concurrently. Use `yarn dev:wasm` and `yarn dev:server` individually when debugging.
- Start server from build: `yarn start` (serves built server bundle).
- Tests / lint / typecheck: `yarn test`, `yarn lint`, `yarn typecheck`.

Project conventions and patterns
- Routing & server entry: use `entry.client.tsx`, `entry.server.tsx`, and `root.tsx` for app bootstrapping. See `app/entry.server.tsx` and `app/root.tsx` for request lifecycle hooks.
- Feature layout: UI components under `app/components`, feature pages under `app/routes` - follow existing folder patterns.
- Rust→WASM integration: the repo depends on the `pkg` folders produced by `wasm-pack`. Never manually edit `rust-wasm/*/pkg`; regenerate via the `yarn build:...` scripts. `client-rust-functions` and `server-rust-functions` are local package names in `package.json`.
- Build ordering: WASM must be built before the JS build because `package.json` links those local packages. `yarn build` enforces this.

Integration points to inspect when changing behavior
- `package.json` — central scripts and local wasm package aliases.
- `configuration/build_remix_app.ts` — bundling/deployment bundle logic used by `build:deployment_bundle`.
- `configuration/build_sw.js` — service-worker build pipeline.
- `cdk-remix-app.ts` and `lib/` — CDK infra and deployment patterns.
- `rust-wasm/client-code` and `rust-wasm/server-code` — Rust sources; `wasm-pack` build targets differ (`--target web` vs `--target nodejs`).

File examples to use as references
- App root: [app/root.tsx](../app/root.tsx)
- Routes entry: [app/routes.ts](../app/routes.ts)
- Server/client entries: [app/entry.server.tsx](../app/entry.server.tsx) and [app/entry.client.tsx](../app/entry.client.tsx)
- WASM client crate: [rust-wasm/client-code](../rust-wasm/client-code)
- WASM server crate: [rust-wasm/server-code](../rust-wasm/server-code)
- Build scripts and scripts map: [package.json](../package.json)

Patterns for changes and PRs
- If a change touches Rust/WASM code, update the corresponding `wasm-pack` build and ensure `yarn build:wasm` succeeds locally.
- For runtime changes in server JS, run `yarn build` and `yarn start` to smoke-test the built server bundle.
- Keep CDK infra changes separate from app logic; follow existing stacks in `lib/` and `cdk-remix-app.ts`.

What to avoid
- Don't edit `rust-wasm/*/pkg` directly — it's generated by `wasm-pack`.
- Avoid changing package aliases in `package.json` without updating the wasm build outputs and `yarn install` step used in `build:wasm`.

If you need more context
- Ask for the specific area (build, wasm, routes, infra). Point to relevant files above and include recent failing command output when available.
